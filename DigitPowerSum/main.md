# Digit Power Sum

<p>The number 512 is interesting because it is equal to the sum of its digits raised to some power: 5 + 1 + 2 = 8, and 8<sup>3</sup> = 512. Another example of a number with this property is 614656 = 28<sup>4</sup>.</p>
<p>We shall define <i>a</i><sub>n</sub> to be the <i>n</i>th term of this sequence and insist that a number must contain at least two digits to have a sum.</p>
<p>You are given that <i>a</i><sub>2</sub> = 512 and <i>a</i><sub>10</sub> = 614656.</p>
<p>Find <i>a</i><sub>30</sub>.</p>

## Solution

Let $DS(n)$ be the digits sum of $n$. First, let's show that there is no $n \ge 10$ such that $DS(n) = n$. Let $P_n(x)$ be the polynomial such that the coefficient of $x^k$ is the digit corresponding to $10^k$ in $n$. Then clearly $P_n(10) = n, P_n(1) = DS(n)$. But as $P_n(x)$ is not a constant function, then it must be increasing for all $x \gt 0$. Therefore $DS(n) = P_n(1) \lt P_n(10) = n$.

Let $\{ b_j \}_{j=1}^\infty$ be the increasing sequence of all powers with base $\ge 2$ and exponent $\ge 2$. If the same number can be generated by different combinations of bases and exponents, it will appear in the sequence as many times as there are combinations, and to each appearance in the sequence we will associate a different combination of base and exponent. Then $a_i$ will be the $i$-th element in this sequence such that the digit sum of $b_j$ equals the associated base.

Finally $\{ b_j \}_{j=1}^\infty$ can be generated by keeping a list of the largest base we have generated for each exponent at any given timestep. For all exponents $e$ in the list we calculate the smallest $(b + 1)^e$ where $b$ is the last base we generated for such exponent. If $e_{\text{max}}$ is the greatest exponent in the list we also need to check if $2^{e_{\text{max}} + 1}$ is smaller than all $(b+1)^e$. If it is we return $b_j = 2^{e_{\text{max}} + 1}$, otherwise we return $(b + 1)^e$ and we update the list of exponents to reflect this latest change.